AWS SAA 3일차
*복습하기
자동 백업용으로 AWS S3를 이용가능.

*실습하기
서버를 백업하고 복원해보기.

EC2 이동
어제 만든 실습한 인스턴스에서 마우스 우클릭후 이미지생성
AMI에서 정상생성 확인가능.
인스턴스에서 기존 인스턴스 종료(삭제)
AMI에서 생성된 이미지 우클릭후 시작하기선택.
서버생성 과정과 동일하게 설정해줌.
인스턴스 페이지로 이동 후 신규로 생성된 인스턴스의 퍼블릭 IP 확인후 PuTTY를 통
해 접속.
Network는 Net(촘촘하게 연결되어 있는) + Work(일)의 합성어로 연결해서 서 로가
가지고 있는 정보를 결합하여 생산적인 가치 만드는 일. 서로 통신을 하기 위해서는
반드시 지켜야 하는 약속들이 있습니다. 서로 간의 통신을 하기 위해 지켜야 하는 약
속들을 준수하고, 교환함으로써 통신이 성립됨. 이처럼 통신을 위해 지켜야 하는 약
속들을 프로토콜(Protocol)이라함.

VPN은 Virtual Private Network의 약자로 큰 규모의 조직이 여러 곳에 분산되 어 있
는 컴퓨터들을 연결하는 보안성이 높은 사설 네트워크. 보다 안정적이며, 보안성 높
은 통신 서비스를 제공.

기존 IDC(Internet Data Center)에서 서비스하던 모든 시스템을 클라우드로 이 전하
는 것은 매우 어려운 일. 이 때 IDC - 클라우드 간의 네트워크 연결을 통해 기존 시스
템과 클라우드 시스템 간의 데이터 통신이 필요한데 AWS VPC와 VPC Gateway를 통
해 온프레미스 VPN 장비와 AWS 간의 VPN을 연결가능, => 보안성 높은 하이브리
드 클라우드(Hybrid Cloud) 환경을 구현 하여, 원활한 클라우드 컴퓨팅 서비스를 지
원.
1. Network
2. VPN(Virtual Private Network)
3. VPC(Virtual Private Cloud)

AWS 클라우드에서 논리적으로 격리된 네트워크 공간을 할당하여 가상 네트워크에
서 AWS 리소스를 이용할 수 있는 서비스. Amazon VPC 자체 IP 주소 범위, 서브넷
(Subnet) 생성, 라우팅 테이블(Routing Table) 및 네트워크 게이트웨이 구성 선택 등
가상 네트워킹 환경을 완벽하게 제 어가능. 기업의 데이터 센터와 VPC 사이에 하드
웨어 가상 사설 네트워크 연결을 생 성하여, AWS 클라우드를 기업의 데이터 센터처
럼 이용가능.
즉 VPN을 이용하기위해서는 VPC가 필요.

Private IP Address 프라이빗 IP주소 : VPC내부에서만 사용할 수 있는 IP주소.
Public IP Address 퍼블릭 IP주소 : 인터넷을 통해 연결할 수 있는 IP주소. 인스턴스
와 인터넷간의 통신을 위해 사용할 수 있음.
Elastic IP Address 탄성 IP주소 : 동적 컴퓨팅을 위해 고안된 고정 퍼블릭 IP주소.

*VPC와 서브넷 (Subnet)
VPC(Virtual Private Cloud)와 서브넷(Subnet)의 사이즈 ▪ VPC를 생성할 때 VPC에서
사용하게 될 IP 주소의 범위(예: 10.0.0.0/16)를 지정하게 되는 데 범위를
CIDR(Classless Inter-Domain Routing) 블록 형태로 지정. 시작과 끝 주소.

*CIDR : 클래스없는 도메인 간 라우팅 기법, IP주소 할당 방법.

*퍼블릭 서브넷(Public Subnet) : 서브넷 네트워크 트래픽이 인터넷 게이트웨이
(Internet Gateway, IGW)로 라우팅되는 서브넷. (퍼블릭= 인터넷연결가능)

*프라이빗 서브넷(Private Subnet) : 인터넷 게이트웨이로 라우팅 되지 않는 서브넷
(=인트라넷) (프라이빗 = 인터넷연결불가)

*라우팅 테이블(Routing Table) : 서브넷 외부로 나가는 아웃바운드(Outbound) 트
래픽에 대해 허용된 경로를 지정하는 라우팅 테이블(Routing Table)이 연결되어 있
어야 함. 서브넷은 자동으로 VPC의 기본 라우팅 테이블과 연결되며, 테이블의 내용
을 변경가능. 이러한 라우팅 테이블은 VPC의 서브넷 내에서 생성된 네트워크 패킷
이 목적지 주소로 이용하기 위해 어떤 경로로 이동되어야 하는지를 알려주는 나침반
과 비슷한 개념. 서브넷 간의 통신이나 VPC 간의 원활한 통신을 위해 라우팅 테이
블 이용.

*Security Group(보안그룹)과 Network Access Control List(네트워크 액세스 제어
목록)차이
보안그룹은 허용만 할 수 있음. Deny(거부)는 할 수 없다. 네트워크 ACL은 Allow(허
용) Deny(거부) 둘다 가능!

4. VPC의 구성요소
*VPC Peering Connection 만약 한국에도 만들고 영국에도 만드는 경우 즉, 물리적
으로 완전히 떨어진 VPC를 허용된 VPC들 끼리만 비공개적으로 연결시켜주는 것. 서
로 다른 지역에 있어도 하나의 네트워크 상에 있는것처럼 연결할 수 있음.
예를들면 다국적기업이나, 글로벌 기업의 경우에는 각국의 법인들 간에 통신할 수
있는 이메일 서비스를 제공받고 또 이러한 전용회선 서비스를 이용함. AWS는 2017
년 11월 다른 리전간 VPC Peering지원을 발표. 2018년 7월부터는 서울리전을 비롯
한 대부분의 리전에서 리전간 VPC Peering이 제공됨. 글로벌 시스템을 구축하는 경
우 저렴한 비용과 안정성, 보안성높은 네트워크 인프라를 활용할 수 있음.

*NAT(Network Address Translation) 게이트웨이: Network Address Translation의
약자로, 외부 네트워크에 알려 진 것과 다른 IP 주소를 사용 하는 내부 네트워크에
서, 내부 IP 주소를 외부 IP 주소로 변환하는 작업을 수행하는 서비스

*NAT 게이트웨이를 구성하기 위한 3가지 조건
퍼블릭 서브넷(Public Subnet)지정
탄력적 IP(Elastic IP) 주소 필요
NAT 게이트웨이를 만든 후 인터넷 트래픽이 NAT 게이트웨이로 통신이 가능하도록
프라이빗 서브 넷(Private Subnet)과 연결된 라우팅 테이블(Routing Table) 업데이트
외부에 공개될 필요가 없거나, 보안상 중요한 서비스지만 윈도우 패치나 보안 업데
이트, 소프트웨어 업데이트를 인터넷을 통해 받아야 하는 경우 NAT 게이트웨이나
NAT 인스턴스(NAT Instance)를 사용.
받는사람의 이메일 주소르 보고 내부에서 쓰는 IP로 바꿔준다.  사설 IP를 공용IP로
또는 공용IP를 사설IP로 바꾸어 주는 기술. NAT게이트웨이까지 구성하면 사설망이
라도 인터넷과 연결가능!

*VPC Endpoint ▪ Amazon S3는 인터넷망에 연결된 서비스로 인터넷 기반의 IP 주소
와 연결 정보보유, 이러한 공용 리소스에 대해 퍼블릭 서브넷(Public Subnet)에 위치
한 인스턴스는 인터넷을 통해 문제 없이 연결 가능. 문제는 프라이빗 서브넷(Private
Subnet)에 위치한 인스턴스는 인터넷과 연결되어 있는 S3와 같은 공 용 리소스를 연
결할 수 없음(IP주소가 없기때문...) S3에 연결하기 위해서 NAT 게이트웨이나 NAT
인스턴스가 필요함. AWS에서는 이 때 VPC Endpoint# 이용하면 쉽게 S3나
DynamoDB에 연결가능함.

*VPN(Virtual Private Network) 연결
기본적으로 Amazon VPC에서 서비스되는 인스턴스는 On-Premise에 있는 서버나
IDC 내의 시스템 과 통신할 수 없음. 보안적으로 매우 취약함. 이렇게 AWS VPC 내
인스턴스와 IDC 내 시스템 간의 데이터 통신을 위해 VPC에 가상의 프라이빗
(Private) 게이트웨이를 연결하고 사용자 지정 라우팅 테이블을 생성하며, 보안 그룹
의 규칙을 업데이트하고, AWS 관리형 VPN 연결을 생성하여 VPC에서 원격의 네트
워크에 접속 가능하도록 하이브리드 클라우드(Hybrid Cloud) 환경을 구성가능. 즉,
VPN 연결은 VPC와 자체 네트워크 사이의 연결을 의미.

*실습하기
-AWS에서 VPC 마법사를 통한 퍼블릭서브넷과 프라이빗 서브넷 만들기
-리전(Region) 간 VPC Peering으로 글로벌 통 합 네트워크 환경 구축하기
